generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
  directUrl = env("DIRECT_DATABASE_URL")
}

model User {
  id String @id @default(uuid()) @map("_id")
  email String @unique
  password String

  createdAt DateTime @default( now() ) @map("created_at")
  updatedAt DateTime @default( now() ) @map("updated_at")

  @@map("users")
}

model Ingredient {
  id String @id @default(uuid()) @map("_id")
  name String
  recipes RecipeIngredient[]
  category Category
  unit Unit
  pricePerUnit Float?
  description String?

  createdAt DateTime @default( now() ) @map("created_at")
  updatedAt DateTime @default( now() ) @map("updated_at")

  @@map("ingredients")
}

enum Category {
  VEGETABLES
  FRUITS
  MEAT
  DAIRY
  SPICES
  OTHER
}

enum Unit {
  GRAMS
  KILOGRAMS
  LITERS
  MILLILITERS
  PIECES
}

model Menu {
  id String @id @default(uuid()) @map("_id")
  name String
  description String
  imageUrl String? @map("image_url")
  ingredients RecipeIngredient[]

  @@map("menu")
}

model RecipeIngredient {
  id String @id @default(uuid()) @map("_id")
  recipe Menu @relation(fields: [recipeId], references: [id])
  recipeId String
  ingredient Ingredient @relation(fields: [ingredientId], references: [id])
  ingredientId String
  quantity Float

  @@map("recipe_ingredient")
}